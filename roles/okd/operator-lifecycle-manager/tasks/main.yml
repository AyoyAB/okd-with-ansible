---

#  https://docs.okd.io/4.11/operators/admin/olm-restricted-networks.html#olm-restricted-networks-operatorhub_olm-restricted-networks
- name: Disable default OperatorHub sources
  kubernetes.core.k8s:
    kubeconfig: "{{ openshift_files_kubeconfig }}"
    state: present
    definition:
      apiVersion: config.openshift.io/v1
      kind: OperatorHub
      metadata:
        name: cluster
      spec:
        disableAllDefaultSources: true
  register: status
  until: "'result' in status"
  when: disable_default_operator_hub
